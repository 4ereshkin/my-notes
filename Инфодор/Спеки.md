## Каталог методов и спецификации нод

### NodeSpec

Каждая нода определяется не только своим ID и параметрами, но и "спекой" — описанием её типа, допустимых входов/выходов и параметров. Это помогает как UI-редактору (Лаборатории), так и валидатору ядра правильно обрабатывать, отображать и проверять ноды.

```python
@dataclass(frozen=True)
class NodeSpec:
    type: str                 # Уникальный тип: "readers.las", "filters.range", ...
    title: str                # Человекочитаемое имя
    category: str             # Категория для группировки в UI
    version: str = "0.0.1"
    inputs: List[PortSpec] = field(default_factory=list)
    outputs: List[PortSpec] = field(default_factory=list)
    params: List[ParamSpec] = field(default_factory=list)
    compile: Optional[Callable[[Dict[str, Any]], Dict[str, Any]]] = None
    validate_params: Optional[Callable[[Dict[str, Any]], List[str]]] = None
```

### PortSpec и ParamSpec

```python
PortKind = Literal['points', 'raster', 'tensors', 'file', 'none']

@dataclass(frozen=True)
class PortSpec:
    name: str
    kind: PortKind
    multiple: bool = False
    required: bool = True

@dataclass(frozen=True)
class ParamSpec:
    name: str
    type: Literal['str', 'int', 'float', 'bool', 'enum']
    required: bool = False
    default: Any = None
    enum: Optional[List[str]]
    help: str = ''
```

### NodeRegistry

Регистр всех возможных типов нод. Используется при валидации и экспорте для Лаборатории.

```python
class NodeRegistry:
    def __init__(self):
        self._by_type: Dict[str, NodeSpec] = {}
    
    def register(self, spec: NodeSpec):
        if spec.type in self._by_type:
            raise ValueError(f'Тип уже зарегистрирован: {spec.type}')
        self._by_type[spec.type] = spec

    def get(self, type_: str) -> NodeSpec:
        return self._by_type[type_]
    
    def list(self) -> List[NodeSpec]:
        return list(self._by_type.values())

    def export_public(self) -> List[Dict[str, Any]]:
        return [...]
```

### Использование

- При создании новой ноды в UI, Лаборатория запрашивает спецификации (`REGISTRY.export_public()`).
- При проверке графа, валидатор использует `REGISTRY.get(...)`, чтобы свериться с ожидаемыми параметрами и портами.
